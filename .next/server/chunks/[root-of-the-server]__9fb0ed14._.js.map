{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 122, "column": 0}, "map": {"version":3,"sources":["file:///home/user/site-pdfs-carros/src/app/api/create-payment/route.ts"],"sourcesContent":["\nimport { NextRequest, NextResponse } from 'next/server';\nimport { MercadoPagoConfig, Preference } from 'mercadopago';\n\nconst client = new MercadoPagoConfig({ accessToken: process.env.MP_ACCESS_TOKEN! });\n\nexport async function POST(req: NextRequest) {\n  try {\n    const { product } = await req.json();\n\n    // Garante que o preço seja um número\n    const priceAsNumber = parseFloat(product.preco);\n\n    if (isNaN(priceAsNumber)) {\n      return NextResponse.json({ error: 'Preço inválido.' }, { status: 400 });\n    }\n\n    const preference = new Preference(client);\n    const result = await preference.create({\n      body: {\n        items: [\n          {\n            title: product.titulo || product.descricao, // Usa a descrição se o título não existir\n            quantity: 1,\n            currency_id: 'BRL',\n            unit_price: priceAsNumber, // Envia o preço como número\n          },\n        ],\n        back_urls: {\n          success: `${req.nextUrl.origin}/success`,\n          failure: `${req.nextUrl.origin}/failure`,\n          pending: `${req.nextUrl.origin}/pending`,\n        },\n        auto_return: 'approved',\n      },\n    });\n\n    return NextResponse.json({ url: result.init_point });\n  } catch (error) {\n    console.error('Erro ao criar pagamento:', error);\n    return NextResponse.json({ error: 'Ocorreu um erro ao processar o pagamento.' }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;AACA;AACA;;;AAEA,MAAM,SAAS,IAAI,8IAAA,CAAA,oBAAiB,CAAC;IAAE,aAAa,QAAQ,GAAG,CAAC,eAAe;AAAE;AAE1E,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,IAAI,IAAI;QAElC,qCAAqC;QACrC,MAAM,gBAAgB,WAAW,QAAQ,KAAK;QAE9C,IAAI,MAAM,gBAAgB;YACxB,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAkB,GAAG;gBAAE,QAAQ;YAAI;QACvE;QAEA,MAAM,aAAa,IAAI,8IAAA,CAAA,aAAU,CAAC;QAClC,MAAM,SAAS,MAAM,WAAW,MAAM,CAAC;YACrC,MAAM;gBACJ,OAAO;oBACL;wBACE,OAAO,QAAQ,MAAM,IAAI,QAAQ,SAAS;wBAC1C,UAAU;wBACV,aAAa;wBACb,YAAY;oBACd;iBACD;gBACD,WAAW;oBACT,SAAS,GAAG,IAAI,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC;oBACxC,SAAS,GAAG,IAAI,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC;oBACxC,SAAS,GAAG,IAAI,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC;gBAC1C;gBACA,aAAa;YACf;QACF;QAEA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,KAAK,OAAO,UAAU;QAAC;IACpD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA4C,GAAG;YAAE,QAAQ;QAAI;IACjG;AACF","debugId":null}}]
}